<igx-drop-down #operands (onSelection)="onOperandChanged($event)" [allowItemsFocus]="true">
    <igx-drop-down-item
        *ngFor="let condition of conditions"
        [value]="condition"
        [isSelected]="isConditionSelected(condition)">
        <igx-icon fontSet="filtering-icons" [name]="getCondition(condition).iconName"></igx-icon>
        <span>{{ condition | filterCondition | titlecase }}</span>
    </igx-drop-down-item>
</igx-drop-down>

<ng-template #defaultFilterUI>
    <igx-input-group #inputGroup type="box">
        <igx-prefix #inputGroupPrefix
                    (click)="toggleConditionsDropDown()"
                    (keydown)="onPrefixKeyDown($event)"
                    [igxDropDownItemNavigation]="operands">
            <igx-icon tabindex="0" fontSet="filtering-icons" [name]="expression.condition.iconName"></igx-icon>
        </igx-prefix>
        <input
            #input
            igxInput
            tabindex="0"
            [placeholder]="placeholder"
            autocomplete="off"
            [(ngModel)]="value"
            [type]="type"
            [readonly]="isUnaryCondition"
            (keydown)="onInputKeyDown($event)"/>
            <igx-suffix *ngIf="input.value.length > 0" (keydown)="onClearKeyDown($event)" (click)="clearInput()" tabindex="0">
                <igx-icon>clear</igx-icon>
            </igx-suffix>
    </igx-input-group>
</ng-template>

<ng-template #defaultDateUI>
    <igx-datePicker tabindex="1" [(ngModel)]="value" [locale]="locale" (onClose)="datePickerClose()">
        <ng-template igxDatePickerTemplate let-openDialog="openDialog" let-displayData="displayData">
            <igx-input-group type="box">
                <igx-prefix #inputGroupPrefix
                            tabindex="1"
                            (click)="toggleConditionsDropDown()"
                            [igxDropDownItemNavigation]="operands"
                            (keydown)="onPrefixKeyDown($event)">
                    <igx-icon fontSet="filtering-icons" [name]="expression.condition.iconName"></igx-icon>
                </igx-prefix>
                <input #input
                       igxInput
                       tabindex="1"
                (click)="openDialog()"
                [placeholder]="placeholder"
                autocomplete="off"
                       [value]="displayData | date"
                       [readonly]="true"
                       (keydown)="onInputKeyDown($event)"/>
                <igx-suffix *ngIf="input.value.length > 0" (click)="clearInput()" tabindex="1">
                    <igx-icon>clear</igx-icon>
                </igx-suffix>
            </igx-input-group>
            </ng-template>
    </igx-datePicker>
</ng-template>

<ng-container *ngTemplateOutlet="template; context: { $implicit: this }"></ng-container>
<button *ngIf="showArrows" style="min-width: 20px; max-width: 20px" (click)="scrollChips('left')" igxButton>
    <igx-icon fontSet="material">navigate_before</igx-icon>
</button>
<div #container class="igx-grid__filtering-row-main">
    <div style="display:flex;">
        <igx-chips-area #chipsArea style="display:flex; transition: transform .2s cubic-bezier(.35, 0, .25, 1)" (onSelection)="onChipsSelectionChanged($event)">
            <ng-container *ngFor="let item of expressionsList; index as i; let last = last;">

                <igx-chip id='chip'
                    (onSelection)="onChipSelected($event, item.expression)"
                    (onRemove)="onChipRemoved($event, item)"
                    [selectable]="true"
                    [selected]="item.isSelected"
                    [removable]="true">
                    <igx-icon
                        igxPrefix
                        fontSet="filtering-icons"
                        [name]="item.expression.condition.iconName">
                    </igx-icon>
                    <span>{{getChipLabel(item.expression)}}</span>
                </igx-chip>

                <span id='operand' *ngIf="!last">
                    <button #operatorsButton igxButton (click)="toggleOperatorsDropDown($event, i)">
                        <igx-icon>expand_more</igx-icon>
                        <span>{{getOperator(item.afterOperator)}}</span>
                    </button>
                    <igx-drop-down #operators (onSelection)="onLogicOperatorChanged($event, item, operatorsButton)" [allowItemsFocus]="true">
                            <igx-drop-down-item [igxDropDownItemNavigation]="operators" [value]="0" [isSelected]="item.afterOperator === 0">And</igx-drop-down-item>
                            <igx-drop-down-item [igxDropDownItemNavigation]="operators" [value]="1" [isSelected]="item.afterOperator === 1">Or</igx-drop-down-item>
                    </igx-drop-down>
                </span>

            </ng-container>
        </igx-chips-area>
    </div>
</div>
<button *ngIf="showArrows" style="min-width: 20px; max-width: 20px" (click)="scrollChips('right')" igxButton>
    <igx-icon fontSet="material">navigate_next</igx-icon>
</button>
<div #buttonsContainer class="igx-grid__filtering-row-editing-buttons">
    <button igxButton igxRipple (click)="clearFiltering()" [disabled]="disabled">Reset</button>
    <button igxButton igxRipple (click)="close()">Close</button>
</div>
